---
title: 卡尔曼滤波器介绍
key: 20171017
tags:
  - 优化
  - 滤波器
draft: true
---
# 卡尔曼滤波器介绍

1960年，[Rudolf E. Kálmán](https://en.wikipedia.org/wiki/Rudolf_E._K%C3%A1lm%C3%A1n)发表了一篇著名的论文[1]，对离散线性数据问题提出了一种迭代滤波算法，卡尔曼滤波器因此得名。卡尔曼滤波器适用于估计线性高斯系统，是一种基于最小均方误差或者说是贝叶斯准则的迭代滤波器，其强大之处在于：其可以估计系统的过去、现在与未来的状态，即使是系统的确切模型未知的情况下，同时其效率很高。卡尔曼滤波器广泛应用于自动控制和辅助导航领域。

本文首先对基本的离散卡尔曼滤波进行介绍，之后过渡到扩展卡尔曼滤波。
<!--more--> 
## 离散卡尔曼滤波器

卡尔曼滤波器只要获取上一时刻估计的状态和当前时刻状态的观测值，就可以计算出当前状态的估计值，所以其是一种递归的估计过程。

### 系统模型

卡尔曼系统旨在从一个离散线性系统中估计出当前时刻$k$的状态$x\in R^n$，该线性系统由**差分方程**表示为：

$$
x_k=Ax_{k-1}+Bu_{k-1}+w_{k-1}
$$

同时，当前时刻，由$x_k$产生的测量值为$z\in R_m$，**观测方程**为：

$$
z_k=Hx_k+v_k
$$

**模型解释**： 

- 随机变量$w_k$和$v_k$分别为过程噪声和测量噪声，两者是相互独立的白噪声，符合正态分布：

  $$
  \begin{aligned}
  p(w)\sim N(0,Q)\\
  p(v)\sim N(0,R)
  \end{aligned}
  $$

  在实际情况中，过程噪声协方差矩阵$Q$和测量噪声协方差矩阵$R$可能会随着时间变化而变化，在这里假设其是不变的。


- $n\times n$ 矩阵$A$是状态变换矩阵，将$k-1$时刻的状态转换到$k$时刻状态，同时受到输入控制向量 $u_{k-1}\in R^l$ 和过程噪声的影响，矩阵$A$可能随着时间变化，这里假设其是不变的；
- $n\times l$ 矩阵B将输入控制向量 $u_{k-1}$转换到状态上$x_k$上，如果输入控制向量$u_{k-1}$存在的话；
- $m\times n$ 矩阵$H$将当前状态映射到测量值$z_k$上，矩阵$H$可能随着时间变化，这里假设其是不变的。

### 离散卡尔曼滤波器算法

卡尔曼滤波器用控制反馈的方式来估计系统状态：滤波器估计某时刻的系统状态，然后以含噪声的测量变量为反馈。卡尔曼滤波器的状态由以下两个变量表示：

- $\hat x_k$ 为时刻$k$ 的状态后验估计值；
- $P_k$为时刻$k$ 的状态后验估计误差协方差矩阵，度量估计值的精确程度；

卡尔曼滤波器包含两个阶段：**预测** 和**校正**。在预测阶段，滤波器利用上一状态后验估计和误差协方差矩阵来预测当前状态，得到当前状态的先验估计$\hat x_k^-$和$P_k^-$；在校正阶段，滤波器利用当前状态的测量值对先验估计进行优化校正，得到一个更为精确的估计值，也就是后验估计值$\hat x_k$和$P_k$。这两个阶段的关系如下图所示：

![kf_cycle](/images/ekf/kf_cycle.png)

具体的卡尔曼滤波器迭代公式如下所示：

![kf_cycle](/images/ekf/kf_algorithm.png)

## 参考资料

[1] Kalman R E. A new approach to linear filtering and prediction problems[J]. Journal of basic Engineering, 1960, 82(1): 35-45.










